<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_r_e_a_d_m_e_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# Second_assignment</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;## Introduction</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;In this repository it&#39;s implemented a simple user interface to permit to a generic robot to move in a definite map by avoiding the obstacles. In particular with this interface, user can ask to the robot to move in a random position between the six positions that are allowed, to move in a user defined position, to follow the external walls of the map and to stop in the last robot position.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;To be executed this interface needs other three packages (slam_gmapping, final_assignment and robot_description), without which is not possible to run this code, since some services that are required are contained in these packages.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;Note: this code was developed for ROS melodic, but can be executed also in other ROS distributions by downloading the indicated slam_gmapping, final_assignment and robot_description packages for the considered distribution.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;In this repository there are four folders:</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;* launch</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;* scripts</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;* src</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;* srv</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;The first one contains a launch file that permits to execute the entire program, so by launching the my_robot_controller.launch it&#39;s possible to run the robot user interface and other nodes, like move_base and wall_follower, that are already implemented and permit the robot to move in a certain position and to follow the external walls.</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;In the &quot;scripts&quot; folder it&#39;s contained the robot_user_interface.py script, that is the user interface of the program. Here the program asks the user to give him the commands to decide wich operation should it execute and to do that it calls the services that are launched previously with the launch file.</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;The &quot;src&quot; folder contains the server_second_assignment.cpp code, that is a server that returns randomly one of the six allowed positions.</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;The &quot;srv&quot; folder contains a file to define the type of the data that are returned from the server.</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;## Comunication between nodes</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;![rosgraph](https://user-images.githubusercontent.com/48511957/107848524-59255a00-6df4-11eb-8f9f-f9fe00d28803.png)</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;&lt;br /&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;As it&#39;s possible to see in the picture, this is how the nodes communicate to each others: what it&#39;s interesting to consider is that the robot_user_interface node gets the odom data to obtain the position of the robot in the map (by subscribing to the odom service) and can set the velocity of the robot by publishing a cmd_vel message to the Twist publisher.</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;The robot_user_interface also moves the robot in a certain position by sending a message of type move_base_msgs/MoveBaseActionGoal.</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;## Robot behaviors and software architecture</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;### Software architecture</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;First, at the beginning of the execution the nodes /robot_user_interface and /server_second_assignment initialize the publishers and the subscribers with respect to the other running nodes. After that the main part of the robot_user_interface has to ask in an infinite loop the commands to the user</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;1) To randomly move in one of the allowed positions</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;2) Ask user to choose the target position for the robot</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;3) Let the robot following the external walls</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;4) Stop the robot</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;As previously mentioned, not all the positons are allowed, the only target position that robot is allowed to reach are [-4, -3], [5, -3], [-4, 2], [-4, 7], [5, -7], [5, 1], so if user chooses another position the program asks him to digit it agin.</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;When the position is randomly chosen the robot_user_interface node sends a request to server_second_assignment node, which will return one of the allowed positions. To do that the server generate a random number from 0 to 5 that is utilized as the index of the array in wich are contained the allowed positions.</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;After having received the position either from the server or from the user, to move the robot it&#39;s set a field goal with the x and y coordinates of the target to reach</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;To let the robot follow the external walls, the program only has to call the wall_follower service while to stop the robot the linear velocity is set to 0 and to make sure that the robot won&#39;t go to another position user asks him before, the program sets a field goal with the coordinates of the position of the robot when it was ordered him to stop.</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;### Behaviors</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;As it&#39;s possible to notice by having a look to the RVIZ simulation, at the beginning the robot doesn&#39;t completely know the entire map, so to move in a certain position it will learn the map by scanning it while it is moving. This means that sometimes when the robot has to reach a position it doesn&#39;t know, it goes in a wrong direction at the beginning and when robot understands it, it comes back and searches for another path to follow. At the end, when the robot has seen the entire map, it doesn&#39;t fail the optimal path to reach a certain position anymore.</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;## Considerations</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;The robot can successfully reach the positions and in general move avoiding the obstacles. The algorithm that is implemented to understand the map in which it moves is optimal in this case, since the dimension of the entire map is limited, maybe in a bigger and more complicate map it&#39;s possible that robot can get lost more time before it can learn the entire map.</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;In the code to move in a certain position is adopted the move_base algorithm, it could also be possible to do it by implementing the bug0 algorithm and even ask to user to decide which kind of algorithm robot should use.</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;## How to run the code</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;To run the code it&#39;s necessary to have the slam_gmapping, final_assignment and robot_description packages inside its own workspace, then clone also this repository inside it and then, after having gone in your workspace folder in the terminal, execute the following commands:</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;* roscore &amp;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;* catkin_make</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;* roslaunch final_assignment simulation_gmapping.launch</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;* roslaunch second_assignment my_robot_controller.launch</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;Then you should see the RVIZ and Gazeebo simulation of the robot and of the map, then by digiting the commands on the terminal and by following the instructions on the user interface you can send commands to the robot. </div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
